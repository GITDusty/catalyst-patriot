---
phase: 01-core-visualization-(mvp)
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - app/data/budget-types.ts
  - app/data/florida-budget.ts
  - app/utils/formatting.ts
autonomous: true

must_haves:
  truths:
    - "Florida FY 2024-25 budget data exists with top-level categories and subcategories"
    - "Formatting helpers return readable USD and percent strings"
    - "Charting and dialog dependencies are available in the project"
  artifacts:
    - path: "app/data/budget-types.ts"
      provides: "Budget data types for categories and metadata"
    - path: "app/data/florida-budget.ts"
      provides: "Florida FY 2024-25 budget hierarchy with metadata"
    - path: "app/utils/formatting.ts"
      provides: "formatCurrency + formatPercent helpers"
    - path: "package.json"
      provides: "Dependencies for recharts and Radix dialog"
  key_links:
    - from: "app/data/florida-budget.ts"
      to: "app/data/budget-types.ts"
      via: "typed export of BudgetData"
      pattern: "as BudgetData|: BudgetData"
---

<objective>
Establish the data foundation and dependencies for the FY 2024-25 Florida budget visualization.

Purpose: Provide typed, reusable data and formatting utilities for charts and drill-downs.
Output: Installed charting dependencies, budget data module, and formatting helpers.
</objective>

<execution_context>
@/Users/dustanbruggeman/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/dustanbruggeman/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-core-visualization-(mvp)/01-RESEARCH.md
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Recharts + Radix dialog dependencies</name>
  <files>package.json, package-lock.json</files>
  <action>
    Install the standard visualization stack using npm:
    - recharts
    - @radix-ui/react-dialog
    - @radix-ui/react-visually-hidden

    Keep package.json versions aligned with the research recommendations.
  </action>
  <verify>npm ls recharts @radix-ui/react-dialog @radix-ui/react-visually-hidden</verify>
  <done>Dependencies appear in package.json and resolve without npm errors.</done>
</task>

<task type="auto">
  <name>Task 2: Create typed Florida budget data module</name>
  <files>app/data/budget-types.ts, app/data/florida-budget.ts</files>
  <action>
    Create budget data types in `app/data/budget-types.ts`:
    - `BudgetCategory` with `name`, `value`, optional `children`, and optional `description`.
    - `BudgetMeta` with `fiscalYear`, `totalBudget`, `sourceLabel`, optional `sourceUrl`.
    - `BudgetData` with `meta`, `categories` (array of BudgetCategory).

    Create Florida data in `app/data/florida-budget.ts`:
    - Use total budget 116.5e9 and the top-level category percentages from PROJECT.md.
    - Include a reasonable subcategory breakdown per category (sum equals category total).
    - Populate `meta.fiscalYear` with "FY 2024-25" and `sourceLabel` with a clear placeholder
      label that can be updated later without refactoring. Leave `sourceUrl` undefined if unknown.
    - Ensure the exported data matches the Recharts hierarchy shape: `name`, `value`, `children`.
  </action>
  <verify>npm run lint</verify>
  <done>Florida budget data exports a typed hierarchy with totals and subcategories.</done>
</task>

<task type="auto">
  <name>Task 3: Add formatting helpers for values and percentages</name>
  <files>app/utils/formatting.ts</files>
  <action>
    Create formatting helpers using `Intl.NumberFormat`:
    - `formatCurrency(value: number)` -> compact USD (e.g., $116.5B)
    - `formatPercent(value: number)` -> percent with one decimal (e.g., 39.5%)

    Avoid custom math in components; use these helpers anywhere a budget value or percent is shown.
  </action>
  <verify>npm run lint</verify>
  <done>Formatting helpers exist and are ready for chart, table, and modal usage.</done>
</task>

</tasks>

<verification>
- npm ls recharts @radix-ui/react-dialog @radix-ui/react-visually-hidden
- npm run lint
</verification>

<success_criteria>
- Florida FY 2024-25 budget data is typed and structured for hierarchical charts.
- Formatting helpers provide consistent currency and percent output.
- Recharts and Radix dialog dependencies are installed and resolvable.
</success_criteria>

<output>
After completion, create `.planning/phases/01-core-visualization-(mvp)/01-01-SUMMARY.md`
</output>
